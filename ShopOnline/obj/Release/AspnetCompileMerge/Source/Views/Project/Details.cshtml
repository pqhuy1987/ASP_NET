@model Models.ProjectViewModel

@{
    ViewBag.Title = "Details";
    Layout = "~/Views/Shared/_Layout_Temp.cshtml";
}

<div class="row">
    <div class="col-lg-12">
        <div class="panel panel-info">
            <div class="panel-heading" style="font-size:16.5px"><b>TỔNG CÁC ĐỘI TRONG DỰ ÁN </b></div>
            <!-- /.panel-heading -->
            <div class="panel-body">
                <table width="100%" class="table table-striped table-bordered table-hover">
                    @using (Ajax.BeginForm("DetailsGet", new { id = Model.SelectedProject.ID }, new AjaxOptions
                                    {
                                        HttpMethod = "Get",
                                        InsertionMode = System.Web.Mvc.Ajax.InsertionMode.Replace
                                    }))
                    {
                        <button type="submit" class="btn-sub btn-primary" style="margin-bottom:10px"> <b> +THÊM ĐỘI VÀO DỰ ÁN </b></button>
                    }
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Đội</th>
                            <th>Quân Số Đăng Ký</th>
                            <th>Công Việc Chi Tiết</th>
                            <th>Đội Trưởng Tại Công Trường</th>
                            <th>SĐT Đội Trưởng</th>
                            <th>Ngày Bắt Đầu</th>
                            <th>Ngày Kết Thúc</th>
                            <th>Trạng Thái</th>
                            <th>Chi tiết</th>
                            <th>Sửa</th>
                            <th>Xóa</th>
                        </tr>
                    </thead>
                    <tbody>
                        @{int i = 1; int j = 0;}
                        @foreach (var item in Model.CS_tbLLTCTypeSub)
                        {
                            <tr class="odd gradeX">
                                <td>@i</td>
                                <td>@Html.DropDownListFor(model => Model.CS_tbLLTCTypeSub[j].CS_tbLLTC_ID, new SelectList(Model.LLTC_Name_All, "Value", "Text", @Model.CS_tbLLTCTypeSub[j].CS_tbLLTC_ID), "--- Không Có Công Trường ---", new { @class = "form-control" })</td>
                                <td>@item.CS_tbLLTCNumberRegisterSub</td>
                                <td>@Html.DropDownListFor(model => Model.CS_tbLLTCTypeSub[j].CS_tbLLTCNameJobDetailsSub, new SelectList(Model.WorkTypeDetails_All, "Value", "Text", @Model.CS_tbLLTCTypeSub[j].CS_tbLLTCNameJobDetailsSub), "--- Không Có Công Việc ---", new { @class = "form-control" })</td>
                                <td>@item.CS_tbLLTCNameSiteManagerSub</td>
                                <td>@item.CS_tbLLTCNameSiteManagerMobileSub</td>
                                <td>@(item.CS_tbLLTCStartDateSub.HasValue ? @item.CS_tbLLTCStartDateSub.Value.ToString("dd/MM/yyyy") : "")</td>
                                <td>@(item.CS_tbLLTCEndDateSub.HasValue ? @item.CS_tbLLTCEndDateSub.Value.ToString("dd/MM/yyyy") : "")</td>
                                <td>@item.CS_tbLLTCStatusSub</td>
                                <td>  
                                    <button type="submit" onclick="window.open('/LLTC/DetailsGet/'+@item.CS_tbLLTC_ID , 'windowName_big_2', 'width=1300, height=700, left=24, top=24, scrollbars, resizable')" class="btn-sub btn-info"><b>Xem</b></button>                                    
                                </td>
                                <td>
                                    @using (Ajax.BeginForm("DetailsEditGet", new { id = item.ID, LLTC_ID = item.CS_tbLLTC_ID }, new AjaxOptions
                                    {
                                        HttpMethod = "Get",
                                        InsertionMode = System.Web.Mvc.Ajax.InsertionMode.Replace

                                    }))
                                    {
                                        <button type="submit" class="btn-sub btn-success"><b>Sửa</b></button>
                                    }
                                </td>
                                <td>
                                    @using (Ajax.BeginForm("DetailsDeleteGet", new { id = item.ID, LLTC_ID = item.CS_tbLLTC_ID }, new AjaxOptions
                                    {
                                        HttpMethod = "Get",
                                        InsertionMode = System.Web.Mvc.Ajax.InsertionMode.Replace
                                    }))
                                    {
                                        <button type="submit" class="btn-sub btn-danger"><b>Xóa</b></button>
                                    }
                                </td>

                            </tr>
                                    i++;
                                    j++;
                        }
                    </tbody>
                </table>
            </div>
            <div class="panel-footer"><b></b></div>
        </div>
    </div>
</div>